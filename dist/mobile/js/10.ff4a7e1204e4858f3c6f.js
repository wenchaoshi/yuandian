webpackJsonp([10],{MmXq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("cpdJ"),i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"detail",attrs:{id:"page"}},[n("div",{staticClass:"view",attrs:{id:"MiniRefresh"}},[n("div",{staticClass:"MiniRefresh-box",style:t.product.isShow?{"padding-top":"100px"}:""},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.product.isShow,expression:"product.isShow"}],staticClass:"product-fixTop"},[n("span",[n("img",{attrs:{src:"https://show.qnssl.xuemei99.com/"+t.product.detail.product_image,alt:t.product.detail.product_title}})]),t._v(" "),n("div",[n("h3",[t._v(t._s(t.product.detail.product_title))]),t._v(" "),n("p",[n("i",[t._v("热销产品")]),n("strong",[t._v("￥"+t._s(t.product.detail.price_discount))])])])]),t._v(" "),n("ul",{attrs:{id:"scroll-view"}},t._l(t.list,function(e,s){return n("li",{key:s,attrs:{"data-id":e.id}},[e.showTime?n("div",{staticClass:"detail-date"},[n("span",[t._v(t._s(t._f("gmtDate")(e.create_time)))])]):t._e(),t._v(" "),n("div",{staticClass:"detail-lists",class:e.one_man_send?"detail-lists-type2":"detail-lists-type1"},[n("span",{staticClass:"img-box"},[e.one_man_send?t._e():n("img",{attrs:{src:e.two_image,alt:""}}),e.one_man_send?n("img",{attrs:{src:e.one_image,alt:""}}):t._e()]),t._v(" "),2==e.mssage_type&&e.content_arr?n("div",{staticClass:"detail-lists-content"},[n("h3",[t._v("来自："+t._s(e.content_arr[3]))]),t._v(" "),n("div",[n("img",{attrs:{src:e.content_arr[2],alt:e.content_arr[0]}}),t._v(" "),n("div",[n("p",[t._v("产品："+t._s(e.content_arr[0]))]),t._v(" "),n("p",[t._v("价格："+t._s(e.content_arr[1]/100)+"元")])])])]):t._e(),t._v(" "),3==e.mssage_type&&e.content_arr?n("div",{staticClass:"detail-lists-content"},[n("h3",[t._v("来自："+t._s(e.content_arr[3]))]),t._v(" "),n("div",[n("img",{attrs:{src:e.content_arr[2],alt:e.content_arr[0]}}),t._v(" "),n("div",[n("p",[t._v("团购："+t._s(e.content_arr[0]))]),t._v(" "),n("p",[t._v("价格："+t._s(e.content_arr[1]/100)+"元")])])])]):t._e(),t._v(" "),4==e.mssage_type&&e.content_arr?n("div",{staticClass:"detail-lists-content"},[n("h3",[t._v("来自："+t._s(e.content_arr[3]))]),t._v(" "),n("div",[n("img",{attrs:{src:e.content_arr[2],alt:e.content_arr[0]}}),t._v(" "),n("div",[n("p",[t._v("秒杀："+t._s(e.content_arr[0]))]),t._v(" "),n("p",[t._v("价格："+t._s(e.content_arr[1]/100)+"元")])])])]):t._e(),t._v(" "),5==e.mssage_type&&e.content_arr?n("div",{staticClass:"detail-lists-content"},[n("h3",[t._v("来自："+t._s(e.content_arr[3]))]),t._v(" "),n("div",[n("img",{attrs:{src:e.content_arr[2],alt:e.content_arr[0]}}),t._v(" "),n("div",[n("p",[t._v("砍价"+t._s(e.content_arr[0]))]),t._v(" "),n("p",[t._v("价格："+t._s(e.content_arr[1]/100)+"元")])])])]):t._e(),t._v(" "),0==e.mssage_type||1==e.mssage_type?n("p",{staticClass:"detail-lists-content"},[t._v(t._s(e.content))]):t._e()])])}))])])]),t._v(" "),n("div",{staticClass:"message-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",placeholder:"想跟TA说点什么呢"},domProps:{value:t.content},on:{focus:function(e){t.inputFocus(e)},input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"submit",value:"发送"},on:{click:t.sendInformation}})])])},staticRenderFns:[]};var o=function(t){n("f6V1")},a=n("VU/8")(s.a,i,!1,o,null,null);e.default=a.exports},cpdJ:function(t,e,n){"use strict";(function(t){var s,i=n("Gu7T"),o=n.n(i),a=n("cF7b");e.a={data:function(){return{content:"",list:[],offset:0,count:0,intoViewId:0,contentover:"释放刷新",MiniRefreshBox:0,scrollView:0,MiniRefresh:0,product:{isShow:!1,detail:{content:"",product_image:"",desc:"",price_discount:"",product_title:""}}}},components:{},computed:{},created:function(){s=this},mounted:function(){this.offset=0,this.miniRefresh(),this.getContent();var t=this.$route.query.product_id;t&&(s.product.isShow=!0,this.request("/wxemployee/message/product/"+t+"?product_id="+t,{success:function(t){s.$set(s.product,"detail",t.detail)},error:function(t){}}))},updated:function(){this.MiniRefreshBox=t(".MiniRefresh-box").height(),this.scrollView=t("#scroll-view").height()},methods:{sendInformation:function(){""!==s.content&&this.request("/wxemployee/talk/send/leave?two_man_id="+this.$route.query.customer_id,{type:"post",data:{content:s.content},success:function(t){console.log("发送成功"),s.content="",s.list=[],s.offset=0,s.getContent()}})},getContent:function(e,n){s.request("/wxemployee/talk/send/leave?two_man_id="+this.$route.query.customer_id+"&limit=20&offset="+s.offset,{success:function(i){if(0==i.status){var c,r=i.detail;s.count=i.count;for(var l=0,_=r.length,d=0;d<_;d++){r[d].showTime=!1,l=d<_-1?s.moment(r[d+1].create_time).format("YYYYMMDDHHmm"):0;var u=s.moment(r[d].create_time).format("YYYYMMDDHHmm");if(r[d].new_create_time=u,u-l>5&&(r[d].showTime=!0),1!=r[d].mssage_type&&1!=r[d].mssage_type){var v=r[d].content.split("&");r[d].content_arr=v}}(c=s.list).push.apply(c,o()(r)),s.$nextTick(function(){n?(a.a.intoView(t(n)),console.log(n)):t("#scroll-view li").length&&a.a.intoView(t("#scroll-view li:nth-of-type(1)"))}),e&&e()}}})},miniRefresh:function(){var e=new MiniRefresh({container:"#MiniRefresh",down:{callback:function(){if(s.list.length>=s.count)return e.endDownLoading(),t(".load").text("已加载全部数据").addClass("active success"),void setTimeout(function(){t(".load").removeClass("active success")},500);var n=setTimeout(function(){e.endDownLoading()},4e3);setTimeout(function(){s.offset+=20,s.getContent(function(){e.endDownLoading(),clearTimeout(n)},"#scroll-view li:nth-of-type("+s.list.length+")")},300)}},up:{isLock:!0,contentnomore:"没有更多数据了",contentdown:"上啦显示更多",contentrefresh:"加载中。。。",callback:function(){e.endUpLoading()}}})},inputFocus:function(e){window.setTimeout(function(){window.scrollTo(0,t("body").height()),t("#scroll-view li").length&&a.a.intoView(t("#scroll-view li:nth-of-type(1)")),a.a.intoView(t(".message-box"))},500)}}}}).call(e,n("7t+N"))},f6V1:function(t,e){}});